<!doctype html>
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Refactored JDAPI Test</title>

  <style>
	  pre {
	    margin: 1em;
	    cursor: pointer;
	    transition: background-color 0.3s;
	  }
	  pre:hover {
	    background-color: #f6f6f6;
	  }
	  pre:active {
	    background-color: #ddd;
	  }
	  pre.activated {
	    border-color: hsl(120, 39%, 90%);
	  }
  </style>
  
</head>

<body>
<i><b>RTFC</b>: Read the fucking console output to see whats going on. </i>

<pre class="prettyprint prettyprinted">
	//Initialize base API
	window.api = new window.jd.API({email: "myusername@appwork.org", pass: "supersecret"});
</pre>

<pre class="prettyprint prettyprinted">
	//Initialize base API
	window.api = new window.jd.API();
</pre>

<!-- <pre class="prettyprint prettyprinted">
	//Force TOKEN_INVALID
	var options = JSON.parse(localStorage.getItem("jdapi/src/core/core.js"));
	options.sessiontoken = "7ce23ada91784dc8cf34223dd09a25abfdf42489";
	localStorage.setItem("jdapi/src/core/core.js", JSON.stringify(options));
</pre>
  -->
<!-- <pre class="prettyprint prettyprinted">
	//Initialize different APIs
	window.apiServer = new window.jd.JDAPIServer(apiCore);
	window.apiService = new window.jd.JDAPIService(apiCore);
	window.apiDeviceController = new window.jd.JDAPIDeviceController(apiServer, apiCore);
</pre> -->

<pre class="prettyprint prettyprinted">
	apiDeviceController.refreshAllDeviceAPIs().done(function(devices){
		console.log("DEVICES CALL SUCCESS!");
		devices.forEach(function(deviceAPI){
			console.log(deviceAPI);
		});
	});
</pre>

<pre class="prettyprint prettyprinted">
	apiService.requestAccessToken("db");
</pre>

<pre class="prettyprint prettyprinted">
	apiService.send("db", "http://stats.appwork.org", "/data/db/getLiveView", "null&null");
</pre>

<pre class="prettyprint prettyprinted">
	apiCore.disconnect();
</pre>
 
  <!-- JavaScript at the bottom for fast page loading -->
  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
  <script>window.jQuery || document.write("<script src='../libs/jquery-latest.js'>\x3C/script>");</script>
  <!-- <script src="../libs/cryptojs.js"></script> -->
  
  <!-- <script src="../src/core/jdapi.core.js"></script> -->
  <script src="test/debug.js"></script>

  <script src="bower_components/requirejs/require.js">
  </script>
  <script src="src/jdapi.js">
  </script>
  
  <script>
  require(['jdapi'], function(API){
	//API loaded
	window.jd = {
		API: API
	};
  });
  </script>
  
  <script src="libs/prettify/run_prettify.js"></script>
</body>
</html>